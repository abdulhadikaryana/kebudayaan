(function(a){var b="+ .fx-shadow";a.fn.shadowEnable=function(){return a(this).find(b).show().end()};a.fn.shadowDisable=function(){return a(this).find(b).hide().end()};a.fn.shadowDestroy=function(){return a(this).find(b).remove().end()};a.fn.shadow=function(b){b=a.extend({offset:1,opacity:.2,color:"#000",monitor:false},b||{});b.offset-=1;return this.each(function(){var e="px",f="absolute",c=a(this).shadowDestroy(),d=a("<div class='fx-shadow' style='position: relative;'></div>").hide().insertAfter(c);baseWidth=c.outerWidth(),baseHeight=c.outerHeight(),position=c.position(),zIndex=parseInt(c.css("zIndex"))||0;a('<div class="fx-shadow-color fx-shadow-layer-1"></div>').css({position:f,opacity:b.opacity-.05,left:b.offset,top:b.offset,width:baseWidth+1,height:baseHeight+1}).appendTo(d);a('<div class="fx-shadow-color fx-shadow-layer-2"></div>').css({position:f,opacity:b.opacity-.1,left:b.offset+2,top:b.offset+2,width:baseWidth,height:baseHeight-3}).appendTo(d);a('<div class="fx-shadow-color fx-shadow-layer-3"></div>').css({position:f,opacity:b.opacity-.1,left:b.offset+2,top:b.offset+2,width:baseWidth-3,height:baseHeight}).appendTo(d);a('<div class="fx-shadow-color fx-shadow-layer-4"></div>').css({position:f,opacity:b.opacity,left:b.offset+1,top:b.offset+1,width:baseWidth-1,height:baseHeight-1}).appendTo(d);a("div.fx-shadow-color",d).css("background-color",b.color);c.css({zIndex:zIndex+1,position:c.css("position")=="static"?"relative":""});d.css({position:f,zIndex:zIndex,top:position.top+e,left:position.left+e,width:baseWidth,height:baseHeight,marginLeft:c.css("marginLeft"),marginRight:c.css("marginRight"),marginBottom:c.css("marginBottom"),marginTop:c.css("marginTop")}).fadeIn();if(b.monitor){function g(){var b=a(this),c=b.next();c.css({top:parseInt(b.css("top"))+e,left:parseInt(b.css("left"))+e});a(">*",c).css({height:this.offsetHeight+e,width:this.offsetWidth+e})}c.bind("DOMAttrModified",g);if(d[0].style.setExpression){d[0].style.setExpression("top","parseInt(this.previousSibling.currentStyle.top ) + 'px'");d[0].style.setExpression("left","parseInt(this.previousSibling.currentStyle.left) + 'px'")}}})}})(jQuery);