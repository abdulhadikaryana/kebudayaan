$(document).ready(function(){lamanbudaya.cultureCharts.getCultureMainCategory();$("#filter-chart").click(function(){var a=$("#main-category").val();if(a=="all"){lamanbudaya.cultureCharts.getCultureMainCategory()}else{lamanbudaya.cultureCharts.getCultureSubCategory(a)}})});lamanbudaya.cultureCharts={chart:null,getCultureMainCategory:function(){lamanbudaya.cultureCharts.showLoading();$.ajax({type:"POST",url:lamanbudaya.url.baseUrl+"/chart/category",data:{},dataType:"json",success:function(a){if(lamanbudaya.cultureCharts.chart==null){lamanbudaya.cultureCharts.createCategoryChart(a)}else{lamanbudaya.cultureCharts.updateChartData(a)}lamanbudaya.cultureCharts.hideLoading()}})},getCultureSubCategory:function(a){lamanbudaya.cultureCharts.showLoading();$.ajax({type:"POST",url:lamanbudaya.url.baseUrl+"/chart/sub-category",data:{parent_category:a},dataType:"json",success:function(b){lamanbudaya.cultureCharts.updateChartData(b);lamanbudaya.cultureCharts.hideLoading()}})},createCategoryChart:function(a){console.log(a);lamanbudaya.cultureCharts.chart=new Highcharts.Chart({chart:{renderTo:"category-chart",type:"column"},title:{text:a.title,x:-20},subtitle:{text:"",x:-20},xAxis:{title:{text:a.xLabel},categories:a.category},yAxis:{title:{text:a.yLabel},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{enabled:false},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(b){window.open(lamanbudaya.url.baseUrl+this.config[2],"_blank");b.preventDefault()}}}}},series:[{name:"",data:a.total}]})},updateChartData:function(a){lamanbudaya.cultureCharts.chart.setTitle({text:a.title});lamanbudaya.cultureCharts.chart.xAxis[0].setCategories(a.category);lamanbudaya.cultureCharts.chart.series[0].setData(a.total)},showLoading:function(){if(lamanbudaya.cultureCharts.chart!=null){lamanbudaya.cultureCharts.chart.showLoading()}$("#filter-loading").removeClass("hide")},hideLoading:function(){if(lamanbudaya.cultureCharts.chart!=null){lamanbudaya.cultureCharts.chart.hideLoading()}$("#filter-loading").addClass("hide")}};