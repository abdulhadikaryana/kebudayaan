var marker,map,geocoder;jQuery(document).ready(function(){var e=new window.google.maps.LatLng(53.346881,-6.25886);map=new window.google.maps.Map(jQuery(".rwmb-map-canvas")[0],{zoom:8,center:e,streetViewControl:0,mapTypeId:window.google.maps.MapTypeId.ROADMAP});marker=new window.google.maps.Marker({position:e,map:map,draggable:true});geocoder=new window.google.maps.Geocoder();window.google.maps.event.addListener(map,"click",function(f){marker.setPosition(f.latLng);d(f.latLng)});window.google.maps.event.addListener(marker,"drag",function(f){d(f.latLng)});a();b();function d(f){jQuery("#rwmb-map-coordinate").val(f.lat()+","+f.lng())}function a(){var i=jQuery("#rwmb-map-coordinate").val(),g=jQuery("#rwmb-map-goto-address-button").val(),f,h;if(i){f=i.split(",");marker.setPosition(new window.google.maps.LatLng(f[0],f[1]));h=f.length>2?parseInt(f[2],10):15;map.setCenter(marker.position);map.setZoom(h)}else{if(g){c(g)}}}function c(h){console.log(h);var g="",i=h.split(","),f;for(f=0;f<i.length;f++){g+=jQuery("#"+i[f]).val();if(f+1<i.length){g+=", "}}g=g.replace(/\n/g,",");g=g.replace(/,,/g,",");geocoder.geocode({address:g},function(k,j){if(j==window.google.maps.GeocoderStatus.OK){d(k[0].geometry.location);marker.setPosition(k[0].geometry.location);map.setCenter(marker.position);map.setZoom(15)}})}function b(){var f=jQuery("#rwmb-map-goto-address-button").val();if(!f){return null}jQuery("#"+f).autocomplete({source:function(h,g){geocoder.geocode({address:h.term},function(j,i){g(jQuery.map(j,function(k){return{label:k.formatted_address,value:k.formatted_address,latitude:k.geometry.location.lat(),longitude:k.geometry.location.lng()}}))})},select:function(h,i){jQuery("#rwmb-map-coordinate").val(i.item.latitude+","+i.item.longitude);var g=new window.google.maps.LatLng(i.item.latitude,i.item.longitude);map.setCenter(g);setTimeout(function(){marker.setValues({position:g,animation:window.google.maps.Animation.DROP})},1500)}})}});